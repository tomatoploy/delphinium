<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Anuphan&display=swap" rel="stylesheet">
  <title>for p'earth</title>
</head>
<body>
  <div class="floating-flowers"></div>
  <div id="cassetteBox" class="cassette">
    <div class="top-bar">
      <div class="waveform">
        <div class="message" style="margin: 12px 5px; color: rgba(256, 256, 256, 0.5); font-size: 10px;">05/07/2025</div>
      </div>
      <div class="buttons">
        <button>ÊØéÊó•„ÅÆ„ÅÜ„Åü</button> <!-- song kub-->
        <button>Âêõ„Å∏„ÅÆÊâãÁ¥ô</button> <!-- letter -->
        <button id="photoBtn">ÂÜôÁúü</button>
      </div>
    </div>
    <p style="font-size: 12px; font-weight: 200;">to : my world Àö‚óû‚ô°</p>
    <div class="player">
      <div class="tape-window">
        <video id="videoBg" class="video-bg" muted playsinline>
          <source src="video.mp4" type="video/mp4">
        </video>
        <!-- <div class="reel" id="leftReel"></div>
        <div class="reel" id="rightReel"></div> -->
      </div>
      <div class="deco">
        <div class="power-btn" id="powerBtn"></div>
        <audio id="audio" src="song.mp3"></audio>
        <audio id="sfx-typewriter" src="typewriter.mp3"></audio>
        <audio id="sfx-envelope" src="envelope-open.mp3"></audio>
        <audio id="sfx-click" src="cassette-click.mp3"></audio>
        <div class="speaker"></div>
      </div>
    </div>
    <div class="message">
      <p style="margin-bottom: 0px;">‰ªäÊó•„ÇÇÊúà„Åå„Åç„Çå„ÅÑ„Åß„Åô„Å≠„ÄÇ</p>
      <p style="margin: 0px 0px 5px 0px">2 months with you ‚ô°</p>
    </div>
  </div>

  <!-- Polaroid -->
  <div id="photoOverlay" class="photo-overlay hidden">
    <button class="close-btn">‚úñ</button>
    <div class="polaroid-container">
      <div class="polaroid">
        <img src="gallery.png" alt="Memory 1">
      </div>
    </div>
  </div>

  <script>
  const audio = document.getElementById('audio');
  const leftReel = document.getElementById('leftReel');
  const rightReel = document.getElementById('rightReel');
  const powerBtn = document.getElementById('powerBtn');
  const sfxTypewriter = document.getElementById('sfx-typewriter');
  const sfxEnvelope = document.getElementById('sfx-envelope');
  const tapeWindow = document.querySelector('.tape-window');
  const photoOverlay = document.getElementById('photoOverlay');
  const cassetteBox = document.getElementById('cassetteBox');
  const video = document.getElementById('videoBg');
  const sfxClick = document.getElementById('sfx-click');
  let isPlaying = false;

  // ‡πÄ‡∏•‡πà‡∏ô / ‡∏´‡∏¢‡∏∏‡∏î‡πÄ‡∏û‡∏•‡∏á : ‡∏≠‡∏±‡∏ô‡πÄ‡∏Å‡πà‡∏≤
  // powerBtn.addEventListener('click', () => {
  //   sfxClick.currentTime = 0;
  //   sfxClick.play();
  //   if (!isPlaying) {
  //     setTimeout(() => {
  //     audio.play();
  //     leftReel.classList.add('playing');
  //     rightReel.classList.add('playing');
  //     isPlaying = true;
  //   }, 1000);
  //   } else {
  //     audio.pause();
  //     leftReel.classList.remove('playing');
  //     rightReel.classList.remove('playing');
  //     isPlaying = false;
  //   }
  // });

  powerBtn.addEventListener('click', () => {
    sfxClick.currentTime = 0;
    sfxClick.play();

    if (!isPlaying) {
      setTimeout(() => {
        audio.currentTime = 0;
        video.currentTime = 0;
        audio.play();
        video.play();
        video.classList.add('show');

        isPlaying = true;
      }, 1000);
    } else {
      audio.pause();
      video.pause();
      video.classList.remove('show');

      isPlaying = false;
    }
  });

  // ‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ó‡∏µ‡∏•‡∏∞‡∏ï‡∏±‡∏ß‡πÅ‡∏ö‡∏ö‡∏ó‡∏µ‡∏•‡∏∞‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î
  function typeWriterLines(lines, element, lineDelay = 1400, charSpeed = 20) {
    let lineIndex = 0;

    function typeLine() {
      if (lineIndex >= lines.length) {
        sfxTypewriter.pause(); // ‡∏´‡∏¢‡∏∏‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á
        sfxTypewriter.currentTime = 0;
        return;
      }

      let charIndex = 0;
      const line = lines[lineIndex];
      const span = document.createElement("div");
      element.appendChild(span);

      const typingInterval = setInterval(() => {
        span.innerHTML += line.charAt(charIndex);
        charIndex++;

        if (charIndex >= line.length) {
          clearInterval(typingInterval);
          lineIndex++;
          setTimeout(typeLine, lineDelay);
        }
      }, charSpeed);
    }
    sfxTypewriter.currentTime = 0;
    sfxTypewriter.play();
    sfxTypewriter.loop = true;
    typeLine();
  }

  // ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏ó‡∏õ‡πÄ‡∏û‡∏•‡∏á
  const buttons = document.querySelectorAll('.buttons button');
  buttons.forEach((btn, index) => {
    btn.addEventListener('click', () => {
      if (!isPlaying) {
        audio.play();
        isPlaying = true;
      }

      if (index === 1) {
        sfxEnvelope.currentTime = 0;
        sfxEnvelope.play();

        setTimeout(() => {
          tapeWindow.innerHTML = `<div id="letterText" style="font-family: 'Anuphan', sans-serif; padding:12px; font-size:10px; line-height:1.8; color:#fff; text-align:center;"></div>`;
          const letterElement = document.getElementById('letterText');

          const letterLines = [
            `‡πÄ‡∏¢‡πà ‡∏´‡∏ß‡∏±‡∏î‡∏î‡∏µ‡∏Ñ‡∏±‡∏ö‡πÄ‡∏ó‡∏≠ ‚ú®; ‚Å∫ ‚Çä`,
            `‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏Å‡πá‡∏Ñ‡∏£‡∏ö‡∏£‡∏≠‡∏ö 2 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡∏ô‡∏∞‡∏Ñ‡∏∞`,
            `‡πÄ‡∏Ñ‡πâ‡∏≤‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏ó‡∏≠‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡πÄ‡∏Ñ‡πâ‡∏≤ ‡∏≠‡∏¢‡∏π‡πà‡∏Å‡∏±‡∏ö‡πÄ‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡πÉ‡∏ô‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏Ç‡πÅ‡∏•‡∏∞‡∏ó‡∏∏‡∏Å‡∏Ç‡πå
            ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡πÄ‡∏ó‡∏≠‡πÄ‡∏•‡πà‡∏≤‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏™‡∏ô‡∏∏‡∏Å‡πÉ‡∏´‡πâ‡πÄ‡∏Ñ‡πâ‡∏≤‡∏ü‡∏±‡∏á‡∏´‡∏•‡∏≤‡∏¢‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏•‡∏¢ ‡πÄ‡∏Ñ‡πâ‡∏≤‡∏ä‡∏≠‡∏ö‡∏ü‡∏±‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏ó‡∏≠‡πÄ‡∏•‡πà‡∏≤‡∏ô‡∏∞ ‡∏≠‡∏¢‡∏≤‡∏Å‡∏≠‡∏¢‡∏π‡πà‡∏ü‡∏±‡∏á‡πÄ‡∏ó‡∏≠‡πÄ‡∏•‡πà‡∏≤‡πÄ‡∏¢‡∏≠‡∏∞ ‡πÜ ‡πÄ‡∏•‡∏¢
            ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏ó‡∏≠‡∏ó‡∏µ‡πà‡∏Ñ‡∏≠‡∏¢‡∏ã‡∏±‡∏û‡∏û‡∏≠‡∏£‡πå‡∏ï‡πÄ‡∏Ñ‡πâ‡∏≤‡∏≠‡∏¢‡∏π‡πà‡πÄ‡∏™‡∏°‡∏≠ ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡πÉ‡∏ô‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏ó‡∏≠‡πÄ‡∏´‡∏ô‡∏∑‡πà‡∏≠‡∏¢ ‡πÄ‡∏ó‡∏≠‡∏Å‡πá‡∏¢‡∏±‡∏á‡∏ï‡∏≤‡∏°‡πÉ‡∏à‡πÄ‡∏Ñ‡πâ‡∏≤‡πÄ‡∏™‡∏°‡∏≠
            ‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡πá‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏Å‡πÄ‡∏Ñ‡πâ‡∏≤‡∏ô‡∏∞ ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ô‡∏µ‡πâ‡∏Å‡πá‡∏Ç‡∏≠‡∏ù‡∏≤‡∏Å‡∏ï‡∏±‡∏ß‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏±‡πâ‡∏öüíê`,
            `‡∏™‡∏∏‡∏Ç‡∏™‡∏±‡∏ô‡∏ï‡πå‡∏ß‡∏±‡∏ô‡∏Ñ‡∏£‡∏ö‡∏£‡∏≠‡∏ö 2 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ô‡∏∞‡∏Ñ‡∏∞‚åíüßöüèª‚Äç‚ôÄÔ∏è‚Åï`,
        ];
        // ‡∏£‡∏±‡∏Å‡πÅ‡∏•‡∏∞‡∏Ñ‡∏¥‡∏î‡∏ñ‡∏∂‡∏á‡πÄ‡∏ó‡∏≠‡∏ô‡∏∞
        // ‡∏à‡∏≤‡∏Å üê∞
        // 05/07/2025

          typeWriterLines(letterLines, letterElement, 1400, 30);
        }, 800);
      } else {
        // ‡∏õ‡∏∏‡πà‡∏°‡∏≠‡∏∑‡πà‡∏ô : ‡∏•‡πâ‡∏≠‡πÄ‡∏ó‡∏õ
        tapeWindow.innerHTML = `
          <div class="reel" id="leftReel"></div>
          <div class="reel" id="rightReel"></div>
        `;
        document.getElementById('leftReel').classList.add('playing');
        document.getElementById('rightReel').classList.add('playing');
      }
    });
  });

  // ‡πÅ‡∏™‡∏î‡∏á overlay
  document.getElementById('photoBtn').addEventListener('click', () => {
    cassetteBox.classList.add('slide-down');

    setTimeout(() => {
      cassetteBox.classList.add('hidden');
      photoOverlay.classList.remove('hidden');
      setTimeout(() => {
        photoOverlay.classList.add('show');
      }, 10);
    }, 600);
  });

  // ‡∏õ‡∏¥‡∏î overlay
  document.querySelector('.close-btn').addEventListener('click', () => {
    photoOverlay.classList.remove('show');
    setTimeout(() => {
      photoOverlay.classList.add('hidden');
      cassetteBox.classList.remove('slide-down');
      cassetteBox.classList.add('slide-up');
      cassetteBox.classList.remove('hidden');
      setTimeout(() => {
        cassetteBox.classList.remove('slide-up');
      }, 600);
    }, 600);
  });

  const flowerContainer = document.querySelector('.floating-flowers');

  function createFloatingFlower() {
    const flower = document.createElement('div');
    flower.classList.add('flower');
    flower.textContent = '‚úø';

    const size = Math.random() * 16 + 16; // 16px - 32px
    const left = Math.random() * 100; // %
    const duration = Math.random() * 10 + 10; // 10 - 20s
    const delay = Math.random() * 5; // 0 - 5s

    flower.style.left = `${left}vw`;
    flower.style.fontSize = `${size}px`;
    flower.style.animationDuration = `${duration}s`;
    flower.style.animationDelay = `${delay}s`;

    flowerContainer.appendChild(flower);

    setTimeout(() => {
      flower.remove();
    }, (duration + delay) * 1000);
  }

  setInterval(createFloatingFlower, 800);
  </script>
</body>
</html>